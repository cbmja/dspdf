<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.daishin.pdf.mapper.ReqMapper">

    <insert id = "save" parameterType="ReqParam">
        INSERT INTO dbo.REQ
        (PK
        ,TR_KEY
        ,TOTAL_SEND_CNT
        ,DLV_TYPE_CD
        ,PRINT_TYPE_NM
        ,PAGE_CNT
        ,RET_YN
        ,RECV_NUM
        ,DM_LINK_KEY
        ,CIFNO
        ,DLV_CD
        ,RECV_NM
        ,RECV_POST_CD
        ,RECV_ADDR
        ,RECV_ADDR_DETAIL
        ,PDF_PATH
        ,SAVE_DATE
        ,STATUS
        ,PDF_NM)
        VALUES
        (#{PK}
        ,#{TR_KEY}
        ,#{TOTAL_SEND_CNT}
        ,#{DLV_TYPE_CD}
        ,#{PRINT_TYPE_NM}
        ,#{PAGE_CNT}
        ,#{RET_YN}
        ,#{RECV_NUM}
        ,#{DM_LINK_KEY}
        ,#{CIFNO}
        ,#{DLV_CD}
        ,#{RECV_NM}
        ,#{RECV_POST_CD}
        ,#{RECV_ADDR}
        ,#{RECV_ADDR_DETAIL}
        ,#{PDF_PATH}
        ,#{SAVE_DATE}
        ,#{STATUS}
        ,#{PDF_NM})
    </insert>

    <select id="countGroup" parameterType="ReqParam" resultType="int">
        SELECT COUNT(*) FROM dbo.REQ WHERE TR_KEY = #{TR_KEY}
    </select>
<!--
    <select id="findLast" parameterType="ReqParam" resultType="Integer">
        SELECT COUNT(*) FROM dbo.REQ WHERE TR_KEY = #{TR_KEY} and RECV_NUM = #{TOTAL_SEND_CNT}
    </select>
-->
    <select id="getTrGroup" parameterType="ReqParam" resultType="hashmap">
        SELECT * FROM dbo.REQ WHERE TR_KEY = #{TR_KEY}
    </select>

    <select id="findReq" parameterType="ReqParam" resultType="ReqParam">
        SELECT * FROM dbo.REQ WHERE PK = #{PK}
    </select>

</mapper>